Working on the art of the game
===================PATH==============================================
!!! Unlocking a piece of equipment can trigger a chain reaction,
    achieving a special effect with another piece of equipment.

Multi-element attribute synergy:
 e.g., Water + Lightning = AOE, linking enemies within the electric shock range.

弹道流 已经有雏形（Pierce / Ricochet / Shrapnel）。
炮台流 有 Auto / Stationary。
护盾流 刚做了 Carapace + Bone Plating + Shield AOE。
经济流 有 Coin / Coupon / Reroll 基础

状态流 有 Buff / Debuff / Status 基础 
   Leave a trace wherever you go on map, then apply a status effect to enemies in the area.
   Status effect will be removed when you leave the area for a while.
   Status effect will be removed when you die/restart/clear the level.


仆从流 有 Pet / Minion / Summoner 基础 
   Summon a Summoner that follows you and attacks enemies. When the Summoner dies, 
   it will be replaced by a new one. Summoner will level up with you.
   Summoner will have a unique ability that is different from your own.
   Summoner will have a unique passive ability that is different from your own.

赌狗流 有 Lucky / Risk / Chance 基础



经济流 & 控场流做成通用支线，可以跟任何主流派混搭。

状态流 / 仆从流 / 赌狗流 等核心够稳的时候，再慢慢加进。

Boss: Anti-U
================================RARITY=====================================
Rarity tiers & behavior

Let’s use numeric rarity for easy tuning:
1 – Common: Very frequent in shop, almost never as boss rewards.
2 – Uncommon: Medium frequency.
3 – Rare: Low frequency early, gets more common in later levels.
4 – Epic: Very low chance in shop; most often from bosses.

Rule you wanted:
The higher the rarity, the lower the probability of appearing in the shop (but the refresh chance increases as levels increase).

So for the shop we’ll:
Give lower base weight to higher rarity.
Give higher growth per level to higher rarity.
================================PROPS======================================
'1. Core Offense Props'

;1.1. Piercing Rounds  √ ======================================================================='
Effect: Bullets can pass through N enemies, each hit deals full or slightly reduced damage.
Synergy:
Strong with range (bullets travel farther, hit more).
Strong with firerate (more bullets → more multi-hits).
Good vs swarms, slightly weaker vs single bosses.

;1.2. Ricochet Scope   √  =========================================================================='
Effect: When a bullet hits an enemy or wall, it can bounce once toward the nearest enemy if exists.
Synergy:
Works nicely with your obstacles (walls turn into combo tools).
Great with crit (ricochets can crit too).
Encourages fighting near obstacles instead of open fields.

1.3. Bleeding Edge
Effect: Your hits apply a “Bleed” that deals X% of damage over 3s, stacking up to Y times.
Synergy:
High firerate builds become DoT machines.
Good vs high-HP bosses (persistent damage even while kiting).
Can interact with other props: e.g., “Hemorrhage” that increases damage to bleeding targets.

;1.4. Shrapnel Shells √  =========================================================================='
Effect: On enemy death, 25/35/45% to spawn 3–4 small projectiles in random directions.
Synergy:
Insane in big waves (chain-kill feeling).
More effective with crit (shrapnel can crit).
You can add a prop later that upgrades shrapnel size or count.

;1.5. Mark of Vulnerability

Type: Offensive debuff / mark (shop prop)
Rarity: 3
Base Price: $25
Max Level: 3
Core Fantasy
You periodically “expose” a high-priority enemy,
 making them take extra damage from all sources.


;1.6. Explosive Rounds
Rarity: 2
Base Price: $18
Max Level: 3

Spawn a small AoE explosion centered on that enemy.
Explosion damage is based only on the player base bullet damage (pre-crit).
If the explosion kills another enemy, it chains: that enemy also spawns its own explosion with the same stats.
Explosion damage against bosses is 50%.
Explosion does not hurt the player.

Level 1/2/3:

Damage vs normal enemies: 25%/35%/45% of bullet_base
Damage vs bosses: 12.5%/17.5%/22.5% of bullet_base (rounded down in code)
Radius: small/small+/almost 1 tile — about 0.65/0.80/0.95 tiles
Suggest: radius_px ≈ CELL_SIZE * 0.65/0.80/0.95

;1.7. DOT Rounds
Rarity: 2
Base Price: $20
Max Level: 3
Effect: On player bullet hit, apply DoT. Tick interval 0.5s. Damage per tick uses bullet_base (pre-crit).
Bosses take 70% of DoT damage.

Level 1: damage_per_tick = 0.10 * bullet_base, duration = 2.5s (5 ticks), max_stacks = 1
Level 2: damage_per_tick = 0.16 * bullet_base, duration = 3.0s (6 ticks), max_stacks = 1
Level 3: damage_per_tick = 0.22 * bullet_base, duration = 3.5s (7 ticks), max_stacks = 2

VFX: cyan + white spark burst on hit; glow/orbiting particles while active.

;1.8. Ground Spikes
Rarity: 2
Base Price: $18
Max Level: 3
Effect: While moving, leave temporary spikes at your position. Each spike hits once and slows 5% for 1.0s.
Trade-off: each purchase reduces move speed by ~4% (stacking multiplicatively).

Level 1: spike_damage = 0.30 * bullet_base, lifetime = 3.0s, max_active = 6
Level 2: spike_damage = 0.40 * bullet_base, lifetime = 4.0s, max_active = 10
Level 3: spike_damage = 0.50 * bullet_base, lifetime = 5.0s, max_active = 14


'2. Defense & Survival Props'

Not just raw HP—give them interesting defensive patterns.
;2.1. Bone Plating rarity: 2  √  ==========================================================================
Effect: Every 6 seconds, gain 2hp plating. Stacks are unlimited (reset each level). Purchase limit 5, once capped, any time you have plating it negates the next hit entirely (consuming one stack even if the damage exceeds the plating).
Synergy:
Strong for beginners / melee risk-takers.
Combos with high speed playstyles (you can dash in to grab coins safely).

2.2. Guardian Charm
Effect: When your HP drops below 30%, gain a temporary shield and +X% speed for 3 seconds. Long cooldown.
Synergy:
Helps “glass cannon” builds survive mistakes.
Synergizes with speed / positioning to escape on low HP.

2.3. Blood Pact
Effect: +X% damage, but max HP reduced by Y%.
Synergy:
Obvious synergy with max HP props and heal mechanics.
Encourages high skill players to take risks.

2.4. Retaliation Thorns
Effect: Enemies that hit you by contact damage take a flat damage or % of their max HP.
Synergy:
Works well with Bone Plating (you can “intentionally” take occasional hits).
Encourages tanky, lower-mobility builds.

;2.5. Aegis Pulse  √  ==========================================================================
    Trigger condition
Only active while the player has any shield HP:
player.shield_hp > 0 (biome/domain shields, future shield props)
OR carapace_shield_hp > 0 (your Carapace one-time shield)

Effect:
Every X seconds, while shield is present, emit a hexagonal force field centered on the player:
Shape: visually rendered as a hexagon; collision can be:
either a circle in code, and you just draw a hex outline, or
All enemies whose hitbox intersects the field take damage.

;2.6. Carapace  √  ==========================================================================
Effect: Add a one time shield for player

2.7. Shield Capacitor

Rarity: 2 (common/uncommon)

Effect:

When you pick up a heal while at full HP, 
transfer certain ratio of the heal instead grants temporary shield HP.
At higher levels, overheal conversion (10/15/20)% goes up.

Combos:
Carapace + Shield Capacitor → Heals become extra layers on top of your base shield, making Carapace scale really hard later.
Bone Plating + Shield Capacitor → Constant trickle of plating plus overheal > you become a walking shield sandwich.

2.8. Mirror Shell

Rarity: 3
Effect:
While you have shield HP, a percentage of 'RANGED damage' you take is reflected back to the attacker.
At higher levels, reflect % and/or bounce range increases.
Combos:
Mirror Shell + Aegis Pulse
→ You already want to stay close-ish to enemies for the pulse; reflected shots punish ranged hordes simultaneously.
Mirror Shell + Bone Plating
→ The more hits you can “eat” with temporary armor, the more reflected damage you dish out.

2.9. Shardstorm

Rarity: 3–4
Effect:
When your shield breaks, it explodes into shards that fly outward like bullets (number of shards & damage scale with level).

Combos:
Carapace + Bone Plating + Shardstorm
→ Your layers of shield now become ammo when they finally break, turning mistakes into mini-nukes.
Shardstorm + Piercing Rounds / Ricochet Scope / Shrapnel Shells
→ Shards inherit bullet modifiers: piercing, bouncing, or spawning shrapnel on kill. Shield path suddenly becomes part of the bullet engine.

2.10. Retaliation Core

Rarity: 2–3

Effect:
When your shield takes damage, you gain some short buffs:
 +X% bullet damage or +crit chance for a few seconds.

'3. Economy & Bandit Interaction Props'

These are great for your Bandit mechanic and the shop fantasy.

;3.1. Lockbox
Effect: A percentage of your coins becomes “protected” and cannot be stolen by bandits.
Synergy:
Great early if bandits are frequent.
Can open up “greedy” builds where you hoard coins instead of spending immediately.

;3.2. Wanted Poster
Effect: Consumable: next 2 levels, the first Bandit kill pays a bounty.
Synergy:
Converts the “punishment” enemy into a high-reward target.
Combos with high speed (easier to chase them down) and burst damage.

;3.3. Coin Magnet !!!!! √  ==========================================================================
Effect: Increases coin pickup radius. Each level increase 60 px.
Synergy:
Super good with high movement speed, kiting builds.
Makes dangerous coin chasing much safer, good for wave-end cleanup.

;3.4. Golden Interest
Effect: At the start of each level, gain +X% of your unspent coins as bonus.
Synergy:
Encourages the player to save coins and forgo instant power.
Works nicely with Lockbox (protect your savings from bandits).

;3.5. Bandit Radar
Effect: When a bandit spawns, highlight them and slow them slightly for a short duration.
Synergy:
Combined with Wanted Poster → “Bandit hunter” build.
Fits your current collision volume and aura design (you can show a glowing outline).
  
;3.6. Coupon  √  ==========================================================================
Effect： Permanent decrease the price in shop by 5%

;3.7. Shady Loan
rarity: 3, cost: 5, max level: 3
Effect: Take a risky loan: get +80/+120/+160 coins instantly, owe at least that much, and repay over 3/4/5 waves (25/30/35% of current coins, cap 50/80/110) after Golden Interest. Multiple loans stack debt and use the highest timer; the final wave attempts to clear all remaining debt at once, otherwise you lose 30/35/40% max HP.

3.8. Black Market pass
Consumable, Rarity: 3, Base Price: $30
Effect： You’ve got connections in the underworld.
  the next shop becomes a bit of a black market with better econ deals.
  Shop prices +20%, with more rare items available.(all item >= rarity 3)

3.9. VIP Punchcard

Rarity: 3 (rare)
Theme: “You’re a valued customer – the shop starts paying you.”
Effect (concept):
You get cashback on shop spending each time you visit:
Example: “Gain back 10/15/20/25% of coins spent in this shop as spoils at the end of the next level.”
Cashback applies to all purchases including Reroll, which encourages heavy rolling and shopping.

3.10. Spoil Splitter

Rarity: 2 (uncommon)

Effect (concept):
Every time you pick up a coin, you have an X% chance to spawn +1 extra coin 
(chance scales with level, e.g., 10/20/30/40/50%).
Doesn’t trigger on “fake” coins (e.g., bank interest ticks, if you want to avoid loops) – only on actual pickups from the ground.

'4. Utility / Control Props'
These change the way the player moves or controls space.

4.1. Time Dilation Boots
Effect: When you stop moving for ≥ 0.5s, enemies in a radius are slightly slowed.
Synergy:
Encourages a “turret” playstyle: stand and shoot.
Good with high firerate and range.
Interesting opposite to normal “run and gun” speed builds.

4.2. Phantom Dash (if you ever add dash / evade)
Effect: Dashing through enemies deals damage and briefly slows them.
Synergy:
Obvious with speed and any dash cooldown reduction.
Very fun for aggressive play around obstacles.

4.3. Sticky Tar Flask
Effect: Occasionally drops a slowing puddle where you stand for a second, enemies in it are slowed and take minor DoT.
Synergy:
Strong near obstacles, choke points.
Works with knockback / push effects if you add them later.
 
;4.4. Auto-Turret !!!!  √  ==========================================================================
Effect: Deploys a small turret that follows you and fires weak bullets at nearest enemy.
Synergy:
Scales with damage buffs if turret uses your damage.
Good with any prop that boosts “all sources” damage (e.g., Mark of Vulnerability).

;4.5 Stationary Turret    √  ==========================================================================
Similiar to Auto Turret, just can not move

'5. Crit, Element, and Synergy Props'

These give crit & status builds more identity, especially since you already have crit chance.

5.1. Razor Focus
Effect: +Crit chance, but -Fire rate.
Synergy:
Works on builds that already stacked firerate from level-ups.
High synergy with crit damage multiplier if you add that stat later.

5.2. Explosive Crits
Effect: Critical hits cause a small explosion around the target, dealing splash damage.
Synergy:
Ties together crit + crowd control.
Combos insanely with ricochet / pierce / shrapnel.

5.3. Frost Brand
Effect: Hits have a small chance to “chill” enemies, slowing them briefly. If you hit a chilled enemy again, extra damage.
Synergy:
Strong with high firerate (you can proc chill frequently).
Gives non-speed builds some safety through slows.

5.4. Shock Relay
Effect: Every N-th hit chains lightning to nearby enemy for bonus damage.
Synergy:
Rewards sustained fire (auto-fire weapons).
Great vs clustered waves, weaker vs single boss, so still somewhat balanced.

'6.Core Paint System '
Tiles can hold temporary “paint” that affects movement and combat. A tile’s paint has:
Owner state: Neutral / Player Paint / Enemy Paint (enemy paint optional for later).
Intensity: 0–1, starts high when applied, then decays over time. Effects scale with intensity (fresh paint is stronger, faded paint is weaker).
Sources of paint include:
Player movement (trails / footsteps).
Some attacks (projectiles, explosions, AoE splashes).
Boss skills (enemy ink zones).
Props that convert shield, HP, or kills into paint.
Basic rules for Player Paint (future-proof):
While standing on Player Paint:
Small move-speed bonus (respect existing speed cap).
Small attack / damage bonus vs enemies also standing on your paint.
Optional: tiny HP / shield regen and faster “special/ult” meter gain.
Enemy Paint (for later):
Slows the player, may apply chip damage or debuffs (fog, blind, crit reduction), encouraging the player to “reclaim” the ground with their own paint.
Paint always fades over time, keeping the battlefield dynamic instead of permanently covered.
All paint can be covered by other paint, and the new paint will replace the old paint.

6.1. Curing Paint
Path: Core Paint System (OFF – offensive utility)
Rarity: 2 (Common / Uncommon)
Base Price: $12
Max Level: 3
Core Effect
Your movement leaves a short trail of Player Paint (“curing ink”) on the ground.

'7. “Set / Combo” Ideas'
